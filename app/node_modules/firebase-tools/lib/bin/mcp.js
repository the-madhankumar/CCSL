#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.mcp = void 0;
const logger_1 = require("../logger");
(0, logger_1.silenceStdout)();
const index_1 = require("../mcp/index");
const util_1 = require("util");
const types_1 = require("../mcp/types");
const STARTUP_MESSAGE = `
This is a running process of the Firebase MCP server. This command should only be executed by an MCP client. An example MCP client configuration might be:

{
  "mcpServers": {
    "firebase": {
      "command": "firebase",
      "args": ["experimental:mcp", "--dir", "/path/to/firebase/project"]
    }
  }
}
`;
async function mcp() {
    const { values } = (0, util_1.parseArgs)({
        options: {
            only: { type: "string", default: "" },
            dir: { type: "string" },
        },
        allowPositionals: true,
    });
    const activeFeatures = (values.only || "")
        .split(",")
        .filter((f) => types_1.SERVER_FEATURES.includes(f));
    const server = new index_1.FirebaseMcpServer({ activeFeatures, projectRoot: values.dir });
    await server.start();
    if (process.stdin.isTTY)
        process.stderr.write(STARTUP_MESSAGE);
}
exports.mcp = mcp;
